<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCZJU Web Map</title>
    <link rel="stylesheet" href="./index.css">
    <script>
        window.addEventListener('mousewheel', function(event){
            if (event.ctrlKey === true || event.metaKey) {
                event.preventDefault();
            }
        },{ passive: false});
        window.addEventListener('DOMMouseScroll', function(event){
            if (event.ctrlKey === true || event.metaKey) {
                event.preventDefault();
            }
        },{ passive: false});
    </script>
</head>
<body>
    <div id="map">
        <div id="mapf1">
            <img src="background.png" draggable="false">
        </div>
        <div id="mapf2">
            <canvas id="area" width="6379" height="4762"></canvas>
            <script>
                var canvas = document.getElementById("area");
                var context = canvas.getContext("2d");
                //e01
                context.beginPath();
                context.moveTo(3795, 1067);
                context.lineTo(3891, 1009);
                context.lineTo(4259, 945);
                context.lineTo(4335, 1367);
                context.lineTo(3855, 1427);
                context.closePath();
                context.fillStyle = "rgba(255, 86, 255, 0.5)";
                context.strokeStyle = "rgba(255, 86, 255, 0.5)";
                context.fill();
                context.stroke();
                //e02
                context.beginPath();
                context.moveTo(4325, 1046);
                context.lineTo(4710, 980);
                context.lineTo(4766, 1289);
                context.lineTo(4385, 1354);
                context.closePath();
                context.fillStyle = "rgba(255, 86, 86, 0.5)";
                context.strokeStyle = "rgba(255, 86, 86, 0.5)";
                context.fill();
                context.stroke();
            </script>
        </div>
        <div id="mapf3">
            <button id="button-e01" class="area-button">E-1</button>
            <button id="button-e02" class="area-button">E-2</button>
            <script>
                document.getElementById("button-e01").addEventListener("click", function() {
                    this.classList.toggle("area-button-expanded");
                    if (this.classList.contains("area-button-expanded")) {
                        this.innerHTML = "E-1<br>承建人:xxx<br>完成度:xx%";
                    } else {
                        this.innerHTML = "E-1";
                    }
                });
                document.getElementById("button-e02").addEventListener("click", function() {
                    this.classList.toggle("area-button-expanded");
                    if (this.classList.contains("area-button-expanded")) {
                        this.innerHTML = "E-2<br>承建人:yyy<br>完成度:yy%";
                    } else {
                        this.innerHTML = "E-2";
                    }
                });
            </script>
        </div>
    </div>
    <div id="map-control">
        <div id="map-example-box">
            <div id="map-example-detail-a" class="map-example-detail">
                <a id="map-example-color-a" class="map-example-color">&emsp;&emsp;</a>
                <a id="map-example-content-a" class="map-example-content">无人认领</a>
            </div>
            <div id="map-example-detail-b" class="map-example-detail">
                <a id="map-example-color-b" class="map-example-color">&emsp;&emsp;</a>
                <a id="map-example-content-b" class="map-example-content">几乎未开工</a>
            </div>
            <div id="map-example-detail-c" class="map-example-detail">
                <a id="map-example-color-c" class="map-example-color">&emsp;&emsp;</a>
                <a id="map-example-content-c" class="map-example-content">已建造部分</a>
            </div>
            <div id="map-example-detail-d" class="map-example-detail">
                <a id="map-example-color-d" class="map-example-color">&emsp;&emsp;</a>
                <a id="map-example-content-d" class="map-example-content">已基本完成</a>
            </div>
            <div id="map-example-detail-e" class="map-example-detail">
                <a id="map-example-color-e" class="map-example-color">&emsp;&emsp;</a>
                <a id="map-example-content-e" class="map-example-content">旧世界待迁移</a>
            </div>
        </div>
        <button id="button-zoom-in" class="control-button" title="放大">+</button>
        <button id="button-zoom-out" class="control-button" title="缩小">-</button>
        <script>
            let scale = 0.3;
            const zoomInButton = document.getElementById('button-zoom-in');
            const zoomOutButton = document.getElementById('button-zoom-out');
            const mapElement = document.getElementById('map');
            function updateTransformOrigin() {
                const screenWidth = window.innerWidth;
                const screenHeight = window.innerHeight;
                mapElement.style.transformOrigin = `${screenWidth / 2}px ${screenHeight / 2}px`;
            }
            function zoomMap(delta) {
                scale = Math.min(Math.max(0.1, scale + delta), 3);
                updateTransformOrigin();
                mapElement.style.transform = `scale(${scale})`;
            }
            zoomInButton.addEventListener('click', () => {
                zoomMap(0.1);
            });
            zoomOutButton.addEventListener('click', () => {
                zoomMap(-0.1);
            });
            updateTransformOrigin();
            mapElement.style.transform = `scale(${scale})`;
        </script>
    </div>
</body>
</html>